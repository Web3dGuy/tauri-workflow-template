@use '../abstracts' as *;

// =================================
// Tauri Workflow Template - Modern Responsive Design
// Comprehensive responsive utilities and patterns
// =================================

// =================================
// RESPONSIVE CONTAINERS
// =================================

// Container classes with responsive max-widths
.twt-container {
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  padding-left: spacing(4);
  padding-right: spacing(4);
  
  &-sm {
    max-width: container-width(sm);
  }
  
  &-md {
    max-width: container-width(md);
  }
  
  &-lg {
    max-width: container-width(lg);
  }
  
  &-xl {
    max-width: container-width(xl);
  }
  
  &-2xl {
    max-width: container-width(2xl);
  }
  
  &-fluid {
    max-width: none;
  }
}

// =================================
// RESPONSIVE GRID SYSTEM
// =================================

// CSS Grid based responsive grid
.twt-grid {
  display: grid;
  gap: spacing(4);
  
  // Auto-fit columns with minimum width
  &-auto {
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  }
  
  // Responsive column counts
  &-cols-1 { grid-template-columns: repeat(1, 1fr); }
  &-cols-2 { grid-template-columns: repeat(2, 1fr); }
  &-cols-3 { grid-template-columns: repeat(3, 1fr); }
  &-cols-4 { grid-template-columns: repeat(4, 1fr); }
  &-cols-6 { grid-template-columns: repeat(6, 1fr); }
  &-cols-12 { grid-template-columns: repeat(12, 1fr); }
  
  // Responsive breakpoint variations
  @include respond-to(md) {
    &-md-cols-1 { grid-template-columns: repeat(1, 1fr); }
    &-md-cols-2 { grid-template-columns: repeat(2, 1fr); }
    &-md-cols-3 { grid-template-columns: repeat(3, 1fr); }
    &-md-cols-4 { grid-template-columns: repeat(4, 1fr); }
    &-md-cols-6 { grid-template-columns: repeat(6, 1fr); }
  }
  
  @include respond-to(lg) {
    &-lg-cols-1 { grid-template-columns: repeat(1, 1fr); }
    &-lg-cols-2 { grid-template-columns: repeat(2, 1fr); }
    &-lg-cols-3 { grid-template-columns: repeat(3, 1fr); }
    &-lg-cols-4 { grid-template-columns: repeat(4, 1fr); }
    &-lg-cols-6 { grid-template-columns: repeat(6, 1fr); }
  }
}

// =================================
// RESPONSIVE DISPLAY UTILITIES
// =================================

// Show/hide at different breakpoints
.twt-hidden { display: none; }
.twt-visible { display: block; }

// Mobile specific
@include mobile {
  .main-app .twt-hidden-mobile { display: none; }
  .main-app .twt-visible-mobile { display: block; }
}

// Tablet and up
@include respond-to(md) {
  .main-app .twt-hidden-tablet { display: none; }
  .main-app .twt-visible-tablet { display: block; }
  .main-app .twt-visible-mobile { display: none; }
}

// Desktop and up
@include respond-to(lg) {
  .main-app .twt-hidden-desktop { display: none; }
  .main-app .twt-visible-desktop { display: block; }
  .main-app .twt-visible-tablet { display: none; }
}

// =================================
// RESPONSIVE SPACING
// =================================

// Responsive padding utilities
@each $size, $value in $spacing-map {
  .twt-p-#{$size} { padding: $value; }
  .twt-px-#{$size} { 
    padding-left: $value; 
    padding-right: $value; 
  }
  .twt-py-#{$size} { 
    padding-top: $value; 
    padding-bottom: $value; 
  }
  .twt-pt-#{$size} { padding-top: $value; }
  .twt-pr-#{$size} { padding-right: $value; }
  .twt-pb-#{$size} { padding-bottom: $value; }
  .twt-pl-#{$size} { padding-left: $value; }
  
  .twt-m-#{$size} { margin: $value; }
  .twt-mx-#{$size} { 
    margin-left: $value; 
    margin-right: $value; 
  }
  .twt-my-#{$size} { 
    margin-top: $value; 
    margin-bottom: $value; 
  }
  .twt-mt-#{$size} { margin-top: $value; }
  .twt-mr-#{$size} { margin-right: $value; }
  .twt-mb-#{$size} { margin-bottom: $value; }
  .twt-ml-#{$size} { margin-left: $value; }
  
  // Responsive variations
  @include respond-to(md) {
    .twt-md-p-#{$size} {
      padding: $value;
    }
    .twt-md-m-#{$size} {
      margin: $value;
    }
  }
  
  @include respond-to(lg) {
    .twt-lg-p-#{$size} {
      padding: $value;
    }
    .twt-lg-m-#{$size} {
      margin: $value;
    }
  }
}

// =================================
// RESPONSIVE TYPOGRAPHY
// =================================

// Fluid typography utilities
.twt-text-fluid-sm {
  font-size: fluid(font-size(sm), font-size(base));
}

.twt-text-fluid-base {
  font-size: fluid(font-size(base), font-size(lg));
}

.twt-text-fluid-lg {
  font-size: fluid(font-size(lg), font-size(2xl));
}

.twt-text-fluid-xl {
  font-size: fluid(font-size(xl), font-size(3xl));
}

// Responsive text alignment
.twt-text-left { text-align: left; }
.twt-text-center { text-align: center; }
.twt-text-right { text-align: right; }

@include respond-to(md) {
  .twt-md-text-left { text-align: left; }
  .twt-md-text-center { text-align: center; }
  .twt-md-text-right { text-align: right; }
}

// =================================
// RESPONSIVE FLEXBOX
// =================================

// Flex utilities with responsive variants
.twt-flex { display: flex; }
.twt-flex-col { flex-direction: column; }
.twt-flex-row { flex-direction: row; }
.twt-flex-wrap { flex-wrap: wrap; }
.twt-flex-nowrap { flex-wrap: nowrap; }

.twt-justify-start { justify-content: flex-start; }
.twt-justify-center { justify-content: center; }
.twt-justify-end { justify-content: flex-end; }
.twt-justify-between { justify-content: space-between; }
.twt-justify-around { justify-content: space-around; }

.twt-items-start { align-items: flex-start; }
.twt-items-center { align-items: center; }
.twt-items-end { align-items: flex-end; }
.twt-items-stretch { align-items: stretch; }

// Responsive flex direction
@include respond-to(md) {
  .twt-md-flex-row { flex-direction: row; }
  .twt-md-flex-col { flex-direction: column; }
}

// =================================
// LEGACY MOBILE BEHAVIORS
// =================================

// Component-specific responsive behaviors
.sidebar {
  @include mobile {
    &:not(.collapsed) {
      position: absolute;
      z-index: z(sidebar-mobile);
      height: calc(100vh - var(--navbar-height));

      @include shadow(lg);
    }
  }
}

.screen-card {
  @include mobile {
    width: 100px;
    height: 80px;
    
    .screen-name {
      font-size: font-size(xs);
    }
  }
}

.screen-workspace {
  @include mobile {
    touch-action: pan-x pan-y;
    
    .workspace-grid {
      background-size: 15px 15px; // Smaller grid on mobile
    }
  }
}

// =================================
// CONTAINER QUERIES (MODERN)
// =================================

// Container query support for modern browsers
@supports (container-type: inline-size) {
  .twt-container-query {
    container-type: inline-size;
  }
  
  @container (min-width: 320px) {
    .twt-cq-sm {
      display: block;
    }
  }
  
  @container (min-width: 768px) {
    .twt-cq-md {
      display: block;
    }
  }
  
  @container (min-width: 1024px) {
    .twt-cq-lg {
      display: block;
    }
  }
}

// =================================
// PRINT STYLES
// =================================

@media print {
  .twt-print-hidden {
    display: none !important;
  }
  
  .twt-print-visible {
    display: block !important;
  }
  
  // Optimize for print
  * {
    background: #fff !important;
    color: #000 !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }
  
  .sidebar,
  .twt-navbar,
  .console-section {
    display: none !important;
  }
}

// =================================
// ASPECT RATIO UTILITIES
// =================================

.twt-aspect-square { aspect-ratio: 1 / 1; }
.twt-aspect-video { aspect-ratio: 16 / 9; }
.twt-aspect-photo { aspect-ratio: 4 / 3; }

// Fallback for older browsers
@supports not (aspect-ratio: 1) {
  .twt-aspect-square::before {
    content: '';
    display: block;
    padding-bottom: 100%;
  }
  
  .twt-aspect-video::before {
    content: '';
    display: block;
    padding-bottom: 56.25%; // 9/16 * 100%
  }
}

// Additional responsive utilities can be added here as needed 